<ion-label>
  <div class="chapter-header-row">
    <div class="chapter-title">
      @if (!editing()) {
        <span class="idx">{{ chapter.chapterNumber }}.</span>
        <span>{{ chapter.title || 'Untitled Chapter' }}</span>
        <button
          class="cw-btn-glass-primary cw-btn-glass--sm"
          (click)="startEdit($event)"
          title="Edit chapter title"
          aria-label="Edit chapter title">
          <ion-icon name="create-outline" aria-hidden="true"></ion-icon>
        </button>
      } @else {
        <div class="chapter-edit">
          <span class="idx">{{ chapter.chapterNumber }}.</span>
          <ion-input
            class="chapter-edit-input"
            [ngModel]="editValue()"
            (ngModelChange)="editValue.set($event)"
            placeholder="Untitled Chapter"
            (click)="onInputClick($event)"
            (keydown)="onKeydown($event)">
          </ion-input>
        </div>
      }
    </div>
    <div class="chapter-actions">
      @if (editing()) {
        <ion-button
          size="small"
          color="primary"
          [disabled]="saving"
          (click)="saveTitle($event)">
          <ion-icon name="save-outline" slot="start"></ion-icon>
          Save
        </ion-button>
        <ion-button
          fill="outline"
          size="small"
          color="medium"
          [disabled]="saving"
          (click)="cancelEdit($event)">
          <ion-icon name="close-outline" slot="start"></ion-icon>
          Cancel
        </ion-button>
      }
    </div>
  </div>
  <ion-note>{{ sceneCountLabel }}</ion-note>
</ion-label>
