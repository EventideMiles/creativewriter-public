// ============================================
// CreativeWriter Button System
// Consistent button hierarchy for the entire app
// ============================================

// Focus style mixin for accessibility
@mixin cw-focus-visible {
  &:focus-visible {
    outline: 2px solid var(--cw-border-focus);
    outline-offset: 2px;
  }
}

// ============================================
// PRIMARY BUTTON
// Main call-to-action, most prominent
// ============================================
.cw-btn-primary {
  --background: var(--cw-gradient-primary);
  --background-hover: linear-gradient(135deg, var(--cw-color-primary-dark) 0%, var(--cw-color-primary) 100%);
  --background-activated: var(--cw-color-primary-dark);
  --color: white;
  --border-radius: var(--cw-radius-md);
  --box-shadow: var(--cw-shadow-sm);
  font-weight: var(--cw-font-weight-medium);
  transition: all var(--cw-transition-normal);
  @include cw-focus-visible;

  &:hover {
    --box-shadow: var(--cw-shadow-md);
    transform: translateY(-1px);
  }

  &:active {
    transform: translateY(0);
  }

  &[disabled] {
    --background: var(--cw-text-disabled);
    --color: var(--cw-text-muted);
    cursor: not-allowed;
    opacity: 0.6;
  }
}

// ============================================
// SECONDARY BUTTON
// Secondary actions, less prominent
// ============================================
.cw-btn-secondary {
  --background: transparent;
  --background-hover: var(--cw-bg-hover);
  --background-activated: rgba(139, 180, 248, 0.1);
  --border-color: var(--cw-border-accent);
  --border-width: 1px;
  --border-style: solid;
  --color: var(--cw-color-primary-light);
  --border-radius: var(--cw-radius-md);
  font-weight: var(--cw-font-weight-medium);
  transition: all var(--cw-transition-normal);
  @include cw-focus-visible;

  &:hover {
    --border-color: var(--cw-color-primary-light);
    --color: var(--cw-text-primary);
  }

  &[disabled] {
    --border-color: var(--cw-border-subtle);
    --color: var(--cw-text-disabled);
    cursor: not-allowed;
    opacity: 0.6;
  }
}

// ============================================
// DANGER BUTTON
// Destructive actions (delete, remove)
// ============================================
.cw-btn-danger {
  --background: var(--cw-gradient-danger);
  --background-hover: linear-gradient(135deg, var(--cw-color-danger-darker) 0%, var(--cw-color-danger-dark) 100%);
  --background-activated: var(--cw-color-danger-active);
  --color: white;
  --border-radius: var(--cw-radius-md);
  --box-shadow: var(--cw-shadow-sm);
  font-weight: var(--cw-font-weight-medium);
  transition: all var(--cw-transition-normal);
  @include cw-focus-visible;

  &:hover {
    --box-shadow: var(--cw-shadow-md);
    transform: translateY(-1px);
  }

  &:active {
    transform: translateY(0);
  }

  &[disabled] {
    --background: var(--cw-text-disabled);
    --color: var(--cw-text-muted);
    cursor: not-allowed;
    opacity: 0.6;
  }
}

// ============================================
// SUCCESS BUTTON
// Positive actions (save, confirm, complete)
// ============================================
.cw-btn-success {
  --background: var(--cw-gradient-success);
  --background-hover: linear-gradient(135deg, var(--cw-color-success-active) 0%, var(--cw-color-success-darker) 100%);
  --background-activated: var(--cw-color-success-active);
  --color: white;
  --border-radius: var(--cw-radius-md);
  --box-shadow: var(--cw-shadow-sm);
  font-weight: var(--cw-font-weight-medium);
  transition: all var(--cw-transition-normal);
  @include cw-focus-visible;

  &:hover {
    --box-shadow: var(--cw-shadow-md);
    transform: translateY(-1px);
  }

  &[disabled] {
    --background: var(--cw-text-disabled);
    --color: var(--cw-text-muted);
    cursor: not-allowed;
    opacity: 0.6;
  }
}

// ============================================
// GHOST BUTTON
// Minimal emphasis, tertiary actions
// ============================================
.cw-btn-ghost {
  --background: transparent;
  --background-hover: var(--cw-bg-hover);
  --background-activated: rgba(255, 255, 255, 0.1);
  --color: var(--cw-text-muted);
  --border-radius: var(--cw-radius-md);
  font-weight: var(--cw-font-weight-normal);
  transition: all var(--cw-transition-normal);
  @include cw-focus-visible;

  &:hover {
    --color: var(--cw-text-primary);
  }

  &[disabled] {
    --color: var(--cw-text-disabled);
    cursor: not-allowed;
    opacity: 0.5;
  }
}

// ============================================
// ICON BUTTON
// Square button for icon-only actions
// ============================================
.cw-btn-icon {
  --padding-start: var(--cw-space-sm);
  --padding-end: var(--cw-space-sm);
  --padding-top: var(--cw-space-sm);
  --padding-bottom: var(--cw-space-sm);
  --background: transparent;
  --background-hover: var(--cw-bg-hover);
  --background-activated: rgba(255, 255, 255, 0.1);
  --color: var(--cw-text-muted);
  --border-radius: var(--cw-radius-md);
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  transition: all var(--cw-transition-normal);
  @include cw-focus-visible;

  &:hover {
    --color: var(--cw-text-primary);
    --background: var(--cw-bg-hover);
  }

  &.cw-btn-icon--sm {
    width: 28px;
    height: 28px;
    min-width: 28px;
    min-height: 28px;
  }

  &.cw-btn-icon--lg {
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
  }

  &[disabled] {
    --color: var(--cw-text-disabled);
    cursor: not-allowed;
    opacity: 0.5;
  }
}

// ============================================
// ICON BUTTON VARIANTS
// ============================================
.cw-btn-icon-primary {
  @extend .cw-btn-icon;
  --color: var(--cw-color-primary-light);

  &:hover {
    --color: var(--cw-color-primary);
    --background: rgba(71, 118, 230, 0.1);
  }
}

.cw-btn-icon-danger {
  @extend .cw-btn-icon;
  --color: var(--cw-color-danger);

  &:hover {
    --color: var(--cw-color-danger-dark);
    --background: rgba(255, 107, 107, 0.1);
  }
}

.cw-btn-icon-success {
  @extend .cw-btn-icon;
  --color: var(--cw-color-success);

  &:hover {
    --background: rgba(81, 207, 102, 0.1);
  }
}

// ============================================
// GLASSMORPHISM BUTTON
// Transparent glass effect with backdrop blur
// Used for floating action buttons and overlays
// ============================================
.cw-btn-glass {
  // CSS variables for Ionic compatibility
  --padding-start: var(--cw-space-sm);
  --padding-end: var(--cw-space-sm);
  --padding-top: var(--cw-space-sm);
  --padding-bottom: var(--cw-space-sm);
  --background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.12) 0%,
    rgba(255, 255, 255, 0.06) 50%,
    rgba(255, 255, 255, 0.08) 100%
  );
  --background-hover: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.18) 0%,
    rgba(255, 255, 255, 0.10) 50%,
    rgba(255, 255, 255, 0.14) 100%
  );
  --background-activated: rgba(255, 255, 255, 0.22);
  --color: var(--cw-text-primary);
  --border-radius: var(--cw-radius-full);

  // Actual CSS properties for native buttons
  padding: var(--cw-space-sm);
  background: var(--background);
  color: var(--color);
  border-radius: var(--cw-radius-full);
  border: 1px solid rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(var(--cw-blur-xl)) saturate(180%);
  -webkit-backdrop-filter: blur(var(--cw-blur-xl)) saturate(180%);
  box-shadow: var(--cw-shadow-sm);
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--cw-transition-spring);
  position: relative;
  overflow: hidden;
  @include cw-focus-visible;

  // Glass shine effect
  &::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(
      circle at 30% 30%,
      rgba(255, 255, 255, 0.3) 0%,
      rgba(255, 255, 255, 0.1) 40%,
      transparent 70%
    );
    opacity: 0.6;
    transition: all 0.4s ease;
    pointer-events: none;
  }

  // Hover effects only on pointer devices (not touch)
  @media (hover: hover) {
    &:hover {
      background: var(--background-hover);
      border-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.2);

      &::before {
        opacity: 0.8;
        transform: scale(1.1);
      }
    }
  }

  // Active state for touch feedback
  &:active {
    transform: scale(0.98);
    background: var(--background-activated);
  }

  ion-icon {
    font-size: 0.9rem;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    z-index: 2;
    position: relative;
  }

  &.cw-btn-glass--sm {
    width: 28px;
    height: 28px;
    min-width: 28px;
    min-height: 28px;
  }

  &.cw-btn-glass--lg {
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
  }

  &[disabled] {
    --color: var(--cw-text-disabled);
    cursor: not-allowed;
    opacity: 0.5;
  }
}

// ============================================
// GLASSMORPHISM BUTTON COLOR VARIANTS
// ============================================
.cw-btn-glass-primary {
  @extend .cw-btn-glass;

  // Default state - primary tint with icon color
  --color: var(--cw-color-primary-light);
  color: var(--cw-color-primary-light);
  background: linear-gradient(
    135deg,
    rgba(71, 118, 230, 0.35) 0%,
    rgba(139, 180, 248, 0.22) 100%
  );
  border-color: rgba(71, 118, 230, 0.45);

  // Hover enhancement - only on pointer devices
  @media (hover: hover) {
    &:hover {
      background: linear-gradient(
        135deg,
        rgba(71, 118, 230, 0.45) 0%,
        rgba(139, 180, 248, 0.32) 100%
      );
      border-color: rgba(139, 180, 248, 0.6);
      box-shadow: 0 4px 16px rgba(71, 118, 230, 0.35);
    }
  }

  // Active state - for touch feedback
  &:active {
    background: linear-gradient(
      135deg,
      rgba(71, 118, 230, 0.55) 0%,
      rgba(139, 180, 248, 0.40) 100%
    );
    border-color: rgba(139, 180, 248, 0.7);
  }
}

.cw-btn-glass-danger {
  @extend .cw-btn-glass;

  // Default state - danger tint with icon color
  --color: var(--cw-color-danger);
  color: var(--cw-color-danger);
  background: linear-gradient(
    135deg,
    rgba(255, 107, 107, 0.35) 0%,
    rgba(220, 53, 69, 0.22) 100%
  );
  border-color: rgba(255, 107, 107, 0.45);

  // Hover enhancement - only on pointer devices
  @media (hover: hover) {
    &:hover {
      background: linear-gradient(
        135deg,
        rgba(255, 107, 107, 0.45) 0%,
        rgba(220, 53, 69, 0.32) 100%
      );
      border-color: rgba(255, 107, 107, 0.6);
      box-shadow: 0 4px 16px rgba(220, 53, 69, 0.35);
    }
  }

  // Active state - for touch feedback
  &:active {
    background: linear-gradient(
      135deg,
      rgba(255, 107, 107, 0.55) 0%,
      rgba(220, 53, 69, 0.40) 100%
    );
    border-color: rgba(255, 107, 107, 0.7);
  }
}

.cw-btn-glass-success {
  @extend .cw-btn-glass;

  // Default state - success tint with icon color
  --color: var(--cw-color-success);
  color: var(--cw-color-success);
  background: linear-gradient(
    135deg,
    rgba(64, 192, 87, 0.35) 0%,
    rgba(81, 207, 102, 0.22) 100%
  );
  border-color: rgba(81, 207, 102, 0.45);

  // Hover enhancement - only on pointer devices
  @media (hover: hover) {
    &:hover {
      background: linear-gradient(
        135deg,
        rgba(64, 192, 87, 0.45) 0%,
        rgba(81, 207, 102, 0.32) 100%
      );
      border-color: rgba(81, 207, 102, 0.6);
      box-shadow: 0 4px 16px rgba(64, 192, 87, 0.35);
    }
  }

  // Active state - for touch feedback
  &:active {
    background: linear-gradient(
      135deg,
      rgba(64, 192, 87, 0.55) 0%,
      rgba(81, 207, 102, 0.40) 100%
    );
    border-color: rgba(81, 207, 102, 0.7);
  }

  ion-icon {
    transition: transform var(--cw-transition-slow);
  }

  // Icon rotation only on pointer devices
  @media (hover: hover) {
    &:hover ion-icon {
      transform: rotate(180deg);
    }
  }
}

.cw-btn-glass-warning {
  @extend .cw-btn-glass;

  // Default state - warning tint with icon color
  --color: var(--cw-color-warning);
  color: var(--cw-color-warning);
  background: linear-gradient(
    135deg,
    rgba(255, 159, 64, 0.35) 0%,
    rgba(255, 193, 7, 0.22) 100%
  );
  border-color: rgba(255, 159, 64, 0.45);

  // Hover enhancement - only on pointer devices
  @media (hover: hover) {
    &:hover {
      background: linear-gradient(
        135deg,
        rgba(255, 159, 64, 0.45) 0%,
        rgba(255, 193, 7, 0.32) 100%
      );
      border-color: rgba(255, 159, 64, 0.6);
      box-shadow: 0 4px 16px rgba(255, 159, 64, 0.35);
    }
  }

  // Active state - for touch feedback
  &:active {
    background: linear-gradient(
      135deg,
      rgba(255, 159, 64, 0.55) 0%,
      rgba(255, 193, 7, 0.40) 100%
    );
    border-color: rgba(255, 159, 64, 0.7);
  }
}

// Active state for glass buttons (e.g., outline mode toggle)
.cw-btn-glass.active,
.cw-btn-glass-primary.active {
  background: rgba(71, 118, 230, 0.45);
  border-color: rgba(139, 180, 248, 0.6);
  --color: var(--cw-color-primary-light);
  color: var(--cw-color-primary-light);
}

.cw-btn-glass-success.active {
  background: rgba(81, 207, 102, 0.45);
  border-color: rgba(81, 207, 102, 0.6);
  --color: var(--cw-color-success);
  color: var(--cw-color-success);
}

.cw-btn-glass-danger.active {
  background: rgba(255, 107, 107, 0.45);
  border-color: rgba(255, 107, 107, 0.6);
  --color: var(--cw-color-danger);
  color: var(--cw-color-danger);
}

.cw-btn-glass-warning.active {
  background: rgba(255, 159, 64, 0.45);
  border-color: rgba(255, 159, 64, 0.6);
  --color: var(--cw-color-warning);
  color: var(--cw-color-warning);
}

// ============================================
// GLASSMORPHISM BUTTON GROUP
// Connected glass buttons
// ============================================
.cw-btn-glass-group {
  display: flex;
  gap: 0;
  border-radius: var(--cw-radius-full);
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.04) 50%,
    rgba(255, 255, 255, 0.06) 100%
  );
  backdrop-filter: blur(var(--cw-blur-xl)) saturate(180%);
  -webkit-backdrop-filter: blur(var(--cw-blur-xl)) saturate(180%);
  box-shadow: var(--cw-shadow-sm);

  .cw-btn-glass,
  .cw-btn-glass-primary,
  .cw-btn-glass-danger,
  .cw-btn-glass-success,
  .cw-btn-glass-warning {
    border: none;
    border-radius: 0;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    box-shadow: none;

    &:not(:last-child) {
      border-right: 1px solid rgba(255, 255, 255, 0.1);
    }

    &::before {
      display: none;
    }
  }

  // Base glass is transparent in groups
  .cw-btn-glass {
    background: transparent;
  }

  // Colored variants keep their backgrounds in groups
  .cw-btn-glass-primary {
    background: linear-gradient(
      135deg,
      rgba(71, 118, 230, 0.35) 0%,
      rgba(139, 180, 248, 0.22) 100%
    );
    color: var(--cw-color-primary-light);
  }

  .cw-btn-glass-danger {
    background: linear-gradient(
      135deg,
      rgba(255, 107, 107, 0.35) 0%,
      rgba(220, 53, 69, 0.22) 100%
    );
    color: var(--cw-color-danger);
  }

  .cw-btn-glass-success {
    background: linear-gradient(
      135deg,
      rgba(64, 192, 87, 0.35) 0%,
      rgba(81, 207, 102, 0.22) 100%
    );
    color: var(--cw-color-success);
  }

  .cw-btn-glass-warning {
    background: linear-gradient(
      135deg,
      rgba(255, 159, 64, 0.35) 0%,
      rgba(255, 193, 7, 0.22) 100%
    );
    color: var(--cw-color-warning);
  }
}

// ============================================
// BUTTON SIZES
// ============================================
.cw-btn--sm {
  --padding-start: var(--cw-space-sm);
  --padding-end: var(--cw-space-sm);
  --padding-top: var(--cw-space-xs);
  --padding-bottom: var(--cw-space-xs);
  font-size: var(--cw-font-size-sm);
  height: 28px;
}

.cw-btn--lg {
  --padding-start: var(--cw-space-xl);
  --padding-end: var(--cw-space-xl);
  --padding-top: var(--cw-space-md);
  --padding-bottom: var(--cw-space-md);
  font-size: var(--cw-font-size-lg);
  height: 48px;
}

// ============================================
// BUTTON GROUP
// Group of related buttons
// ============================================
.cw-btn-group {
  display: flex;
  gap: var(--cw-space-sm);
  align-items: center;

  &.cw-btn-group--vertical {
    flex-direction: column;
    align-items: stretch;
  }

  &.cw-btn-group--end {
    justify-content: flex-end;
  }

  &.cw-btn-group--center {
    justify-content: center;
  }

  &.cw-btn-group--between {
    justify-content: space-between;
  }
}

// ============================================
// LINK BUTTON
// Button that looks like a link
// ============================================
.cw-btn-link {
  --background: transparent;
  --color: var(--cw-color-primary-light);
  --padding-start: 0;
  --padding-end: 0;
  text-decoration: underline;
  font-weight: var(--cw-font-weight-normal);

  &:hover {
    --color: var(--cw-color-primary);
  }

  &[disabled] {
    --color: var(--cw-text-disabled);
    cursor: not-allowed;
  }
}
